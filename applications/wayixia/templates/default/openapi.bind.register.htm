<!DOCTYPE html>
<html>
<head>
<title> 绑定账号 - wayixia.com</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link type="text/css" rel="stylesheet" href="{$app:qlib/}/ui.css" />
<link type="text/css" rel="stylesheet" href="{$themes:path/}/test.css" />

<link type="text/css" rel="stylesheet" href="{$themes:path/}/waterfall.css">
<link type="text/css" rel="stylesheet" href="{$themes:path/}/registeruser.css">
<link type="text/css" rel="stylesheet" href="{$themes:path/}/user.css">
<link type="text/css" rel="stylesheet" href="{$themes:path/}/style.css" />
<style>
#form-username, #form-password, #form-repassword, #form-email  {
  width: 300px;
  height: 30px;
}

#submit-button {
  width: 305px;
}
</style>
<script src="{$app:qlib}/Q.js">
<!--
import utils.stl;
import utils.json2;
import utils.ajax;
-->
</script>

<script type="text/javascript" language="javascript">
<!--

function check_submit_button() {
   var arr = [
   'msg-username',
   'msg-email',
   ];
   var disabled = false;
   for(var i=0; i<arr.length; i++) {
     if(Q.$(arr[i]).innerHTML != '') {
     disabled = true;
     break;
   }
   }
   Q.$('submit-button').disabled = disabled;
}

Q.Ready(function(){
  Q.$("form-username").onblur = function(){
    if(!this.value) {
      Q.$("msg-username").innerHTML = "请输入用户名";
      check_submit_button();
    } else {
      var username = this.value;
      Q.Ajax({
        command: "{$app:app}&mod=user&action=check-username&inajax=true&username="+username,
        oncomplete: function (xmlhttp){//成功
          try {
            var resp = eval('('+xmlhttp.responseText+')');
          if(resp.header != 0) {
            Q.$("msg-username").innerHTML = resp.data;
          } else {
            Q.$("msg-username").innerHTML = '';
          }
          } catch (e) {
                    Q.$("msg-username").innerHTML = xmlhttp.responseText;
          }
          check_submit_button();
        }
        });
    }
  };

  Q.$("form-email").onblur = function(){
    if(!this.value){
    Q.$("msg-email").innerHTML = "请输入邮件地址";
    check_submit_button();
    } else {
    var email = this.value;
    Q.Ajax({
      command: "{$app:app}&mod=user&action=check-email&inajax=true&email="+email,
      oncomplete: function (xmlhttp){//成功
        try {
          var resp = eval('('+xmlhttp.responseText+')');
        if(resp.header != 0) {
          Q.$("msg-email").innerHTML = resp.data;
        } else {
          Q.$("msg-email").innerHTML = '';
        }
        } catch (e) {
              Q.$("msg-email").innerHTML = xmlhttp.responseText;
        }
        check_submit_button();
      }
    });
    }
  };

});
-->
</script>
</head>

<body>

{#template user.menubar/}

<div id="wrapper" class="skin01" style="margin-top: 40px;"> 
<div class="bground"> 
  <div id="content">  
  <div id="cnthld" class="beibao" style="display: block;"> 
  <ul class="content-tab"> 
  <li class="beibao-tab">
    <a id="my-beibao" href="#" class="tab-title songti tabbtn" hidefocus="">
      <span class="tab-title-tag"></span>创建账号
    </a>  
  </li>
  <!--li class="settings-tab">
    <a id="my-settings" href="#" class="tab-title songti tabbtn" hidefocus="">
      <span class="tab-title-tag">我的</span>设置
    </a>  
  </li>
  <li class="tieba-tab"><a id="tiebatab" href="#" class="tab-title songti tabbtn" hidefocus="" data-click="tieba"><span class="tab-title-tag"></span>贴吧</a> </li-->
  </ul> 
  <div class="cnthld-main clearfix">
    <div class="loadingtpl">LOADING...</div> 
  <div class="col leftside"> 
    <div class="plzhld" data-fill="tab_content">
      <br><br>
        <div class="regmain">
     <div align="left" style="width: 500px; margin-left: 25px; font-size: 14px; line-height: 40px;">
      <form name="form2" action="{$app:module}&action=do-bind-register" method="post">
      <input type="hidden" name="fmdo" value="user" />
      <input type="hidden" name="dopost" value="regok" />
      <div>
        <p>昵称<br />
        <input name="username" type="text" id="form-username" size="30" maxlength="30" value="{$fields:name}"/>
          <span class="msg" id="msg-username"></span>
        </p>
        <p>
          <td>电子邮件<br /><input name="email" type="text" id="form-email" size="30" maxlength="32" /> 
          <span class="msg" id="msg-email"></span></td>
        </p>
        
        <p>
          <br/>
          <button id='submit-button' class="uploadBtn small" disabled/> 创 建 </button>
          <br/><br/><br/>
        </p>
          </div>
      </form>
      </div>
    </div>
    </div>
    <div class="leftside-shadow"></div> 
  </div> 
  </div>
  </div> 
  </div> 
  
  <div id="foot"> <div class="mod-footer"> <div class="bottom-line2"> <p>© WAYIXIA.COM <em class="s-bottom-copyright">&nbsp;&nbsp;&nbsp;&nbsp;</em></p> </div></div> </div> </div> 

  <a class="mod-go-top-btn" href="#" onclick="return false" style="display: none; position: fixed; bottom: 5px; right: 66.5px;"></a> 
</div>

</body>
</html>
