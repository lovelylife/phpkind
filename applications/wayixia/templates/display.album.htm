<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN""http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<title> {$fields:name} - {$fields:uname/} - wayixia.com</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
{#template resinclude}
<script>
<!--

function check_width() {
  if(Q.$('tweenimg').width > Q.$('tweenimg').parentNode.offsetWidth) {
    Q.$('tweenimg').style.width = "100%";
  }
}

function check_error(img) {
  img.src = '{$themes:path}/icon48.png';
}

function check_image_width(img) {
  var img_width = img.width;
  var img_height = img.height;
  if(img_width > img_height) {
    img.style.height = "100%"; 
  } else {
    img.style.width = "100%";
  }
}

-->
</script>

<body>

{#template user.menubar/}

<br><br>
<div id="main">
  <div id="page">
    <!--div class="main-width"><h3 style="font-size: 16px; font-weight:normal"> 画集 >>  {$fields:name}</h3></div-->
    <div class="main-width" style="background: #FFF">
    </div>
    <br>
    <div class="wf-main" id="wf-main">
      <div class="box wf-cld">
        <div class="user-profile">
          <div class="profile-basic">
          <dl>
            <dt>
            <img src="{$app:host}{$cfg:site.avatar}/user92.{$fields:uid}.jpg"
               style="border:1px solid #CCC;width:92px; height:92px;" onerror="check_error(this);">
            </dt>
            <dd class="name" style="margin-left: 90px;text-indent:10px; color: #F40;overflow:hidden;width:120px;text-overflow:ellipsis;white-space:nowrap">
              <nobr>{$fields:uname func="strtoupper(@this)"/}</nobr>
            </dd>
            <dd class="company"> &nbsp;{$fields:description} </dd>
            <dd>
            </dd>
            <dd class="privacy-set"> <a href="#" >&nbsp;&nbsp;</a> </dd>
            <div style="clear:both">
            <html:list
            id="mydatamenu" 
            datasrc="data://albums_data" 
            keySelected="album_id"
            valueSelected="{$get:id}"
            maskSelected="curr"
          >
          <t:data>
          <a href="{$app:host/}/albums/[field:album_id]">
            <span class="uploadBtn small [field:selected]">[field:album_name] ([field:num_images]) </span>
          </a>
          </t:data>
          </html:list>
          </div>
          </dl>
        </div>
        </div>
      </div>
      {#template waterfall/albums}
    </div>
    <div class="clear"></div>
  </div>
  <div class="clear"></div>
  {#template user.footer}
</div>
<br><br>

<script type="text/javascript">
g_page_num = 3;
Q.Ready(function(){

  g_waterfall = new Waterfall({
  "container":"wf-main",
  "colWidth":240,
  "colCount":5,
  "template": '', // Q.$('wf-template').value,
  "animate" : new alpha(),
  "onloaditems" : function(timerout) {
    Q.Ajax({
      command: "{$app:app}?mod=waterfall&action=albums&aid={$get:aid}&p=" + (++g_page_num),
      data: {},
      oncomplete: function(xmlhttp) {
        g_waterfall.append_html(xmlhttp.responseText);
        if(xmlhttp.responseText != "")
          timerout();
      }
    })
  },
  });
});

</script>

</body>
</html>
